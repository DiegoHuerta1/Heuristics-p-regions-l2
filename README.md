# Heuristics-p-regions-l2

This project explores and compares different heuristics for solving the
**p-regions problem** under an L2 objective function.
It includes both novel BRKGA-based methods and classical spatial optimization algorithms.

The optimization goal is:

$$
f(P) := 
    \sum_{P_k \in P} 
    \sum_{i \in P_k} \left\| x_i - \mu_k \right\|_2^2
$$

Where:
- $P = \{P_1, \dots, P_K\}$ is a partition of nodes into regions,
- $x_i$ is the attribute vector of node $i$,
- $\mu_k$ is the centroid of region $P_k $.

---

## Project Structure

- `Heuristics/`: Main library with all BRKGA implementations, PyGeoda wrappers, and batch runners. This is the **core** contribution.
- `run_experiments.py`: Example script for batch processing real-world data with just a few lines of code.
- `example.ipynb`: Example on how to load a graph and apply heuristics interactively.
- `Mexican States Sample Data/`: Data used for the examples, subset of [Mexican State Data](https://github.com/DiegoHuerta1/Mexican_States_Data) repository.

---

## Features

### BRKGA Variants (Main Contribution)
- `mst_brkga`: Uses minimum spanning tree decoder
- `st_brkga`: Uses shortest path tree decoder
- `greedy_brkga`: Greedy decoder

Each BRKGA method supports seeding and repetition-based evaluation.

### Classic Heuristics (via [PyGeoda](https://geodacenter.github.io/pygeoda/index.html))
- SKATER
- REDCAP
- SCHC
- AZP (Greedy, Simulated Annealing, Tabu Search)

These are integrated for fair comparison against BRKGA-based approaches.


## Setup Instructions (Windows)

---

### 1. Clone the repository

Open **PowerShell** or **Command Prompt** and run:

```bash
git clone https://github.com/DiegoHuerta1/Heuristics-p-regions-l2.git

cd Heuristics-p-regions-l2
```

### 2. Create and activate a virtual environment

```bash
python -m venv venv

.\venv\Scripts\activate
```

### 3. Install required dependencies

```bash
python -m pip install --upgrade pip

pip install -r requirements.txt
```

### 4. Prepare your data

Add a folder containing graph instances saved as `.pkl` files generated by **igraph**.  
Each graph should have the following node attributes:

- `"x"`: a list representing the node feature vector  
- `"name"`: the node's name  

You can create artificial instances from:  
https://github.com/DiegoHuerta1/Artificial-Instances-p-regions


---

### 5. Run the experiments

Edit the `run_experiments.py` script to specify the path to your data folder and adjust any parameters as needed.  

Then, execute the script with:
```bash
python run_experiments.py
```





